<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>הספר - שורשים בצלחת</title>
  <link rel="stylesheet" href="styles.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Heebo:wght@300;400;500;600;700;800&family=Frank+Ruhl+Libre:wght@400;500;700;900&display=swap" rel="stylesheet">
</head>
<body class="book-page">

  <!-- Book Navigation -->
  <nav class="book-nav">
    <div class="book-nav-container">
      <a href="index.html" class="back-link">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <polyline points="15 18 9 12 15 6"></polyline>
        </svg>
        <span>חזרה לדף הבית</span>
      </a>
      <div class="book-nav-title">
        <span class="book-nav-icon">📖</span>
        <span>שורשים בצלחת</span>
      </div>
      <button class="help-btn" id="help-btn">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="12" cy="12" r="10"></circle>
          <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"></path>
          <line x1="12" y1="17" x2="12.01" y2="17"></line>
        </svg>
      </button>
    </div>
  </nav>

  <!-- Book Container -->
  <main class="book-main">
    <div class="book-wrapper">
      <div id="book" class="flipbook"></div>
    </div>

    <!-- Controls -->
    <div class="book-controls">
      <div class="controls-group">
        <button id="first-page" class="control-btn" title="עמוד ראשון" aria-label="עמוד ראשון">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <polyline points="11 17 6 12 11 7"></polyline>
            <polyline points="18 17 13 12 18 7"></polyline>
          </svg>
        </button>
        
        <button id="prev-page" class="control-btn" title="עמוד קודם" aria-label="עמוד קודם">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <polyline points="15 18 9 12 15 6"></polyline>
          </svg>
        </button>

        <div class="page-indicator">
          <span id="current-page">1</span>
          <span class="page-separator">/</span>
          <span id="total-pages">--</span>
        </div>

        <button id="next-page" class="control-btn" title="עמוד הבא" aria-label="עמוד הבא">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <polyline points="9 18 15 12 9 6"></polyline>
          </svg>
        </button>

        <button id="last-page" class="control-btn" title="עמוד אחרון" aria-label="עמוד אחרון">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <polyline points="13 17 18 12 13 7"></polyline>
            <polyline points="6 17 11 12 6 7"></polyline>
          </svg>
        </button>
      </div>

      <div class="controls-divider"></div>

      <div class="controls-group">
        <button id="zoom-out" class="control-btn" title="הקטן" aria-label="הקטן">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="11" cy="11" r="8"></circle>
            <line x1="8" y1="11" x2="14" y2="11"></line>
            <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
          </svg>
        </button>

        <button id="zoom-in" class="control-btn" title="הגדל" aria-label="הגדל">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="11" cy="11" r="8"></circle>
            <line x1="8" y1="11" x2="14" y2="11"></line>
            <line x1="11" y1="8" x2="11" y2="14"></line>
            <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
          </svg>
        </button>

        <button id="fullscreen" class="control-btn" title="מסך מלא" aria-label="מסך מלא">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3"></path>
          </svg>
        </button>

        <button id="thumbnails-btn" class="control-btn" title="תמונות ממוזערות" aria-label="תמונות ממוזערות">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <rect x="3" y="3" width="7" height="7"></rect>
            <rect x="14" y="3" width="7" height="7"></rect>
            <rect x="14" y="14" width="7" height="7"></rect>
            <rect x="3" y="14" width="7" height="7"></rect>
          </svg>
        </button>

        <button id="download-btn" class="control-btn" title="הורד PDF" aria-label="הורד PDF">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
            <polyline points="7 10 12 15 17 10"></polyline>
            <line x1="12" y1="15" x2="12" y2="3"></line>
          </svg>
        </button>
      </div>
    </div>
  </main>

  <!-- Thumbnails Panel -->
  <aside id="thumbnails-panel" class="thumbnails-panel hidden">
    <div class="thumbnails-header">
      <h3>תמונות ממוזערות</h3>
      <button id="close-thumbnails" class="close-btn" aria-label="סגור">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <line x1="18" y1="6" x2="6" y2="18"></line>
          <line x1="6" y1="6" x2="18" y2="18"></line>
        </svg>
      </button>
    </div>
    <div id="thumbnails-grid" class="thumbnails-grid"></div>
  </aside>

  <!-- Help Modal -->
  <div id="help-modal" class="modal hidden">
    <div class="modal-overlay"></div>
    <div class="modal-content">
      <button class="modal-close" aria-label="סגור">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <line x1="18" y1="6" x2="6" y2="18"></line>
          <line x1="6" y1="6" x2="18" y2="18"></line>
        </svg>
      </button>
      <h2>מדריך שימוש</h2>
      <div class="help-sections">
        <div class="help-section">
          <h3>ניווט בספר</h3>
          <ul>
            <li><strong>עכבר:</strong> לחצו על קצוות הדפים או גררו כדי להפוך</li>
            <li><strong>מקלדת:</strong> חיצים ימינה/שמאלה לדפדוף</li>
            <li><strong>מובייל:</strong> החליקו ימינה/שמאלה</li>
          </ul>
        </div>
        <div class="help-section">
          <h3>קיצורי מקלדת</h3>
          <ul>
            <li><kbd>←</kbd> <kbd>→</kbd> דפדוף עמודים</li>
            <li><kbd>Home</kbd> <kbd>End</kbd> קפיצה לראשונה/אחרונה</li>
            <li><kbd>F</kbd> מסך מלא</li>
            <li><kbd>T</kbd> תמונות ממוזערות</li>
            <li><kbd>+</kbd> <kbd>-</kbd> זום</li>
          </ul>
        </div>
        <div class="help-section">
          <h3>טיפים</h3>
          <ul>
            <li>השתמשו בתמונות ממוזערות לניווט מהיר</li>
            <li>במסך מלא תקבלו חוויית קריאה אופטימלית</li>
            <li>ניתן להוריד את הספר לצפייה אופליין</li>
          </ul>
        </div>
      </div>
    </div>
  </div>

  <!-- Loading Overlay -->
  <div id="loading-overlay" class="loading-overlay">
    <div class="loading-content">
      <div class="loading-spinner"></div>
      <p class="loading-text">טוען את הספר...</p>
      <p class="loading-progress" id="loading-progress">מכין את הדפים</p>
    </div>
  </div>

  <!-- Scripts -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
  <script src="https://unpkg.com/page-flip@2.0.7/dist/js/page-flip.browser.js"></script>
  <script src="book.js"></script>

</body>
</html>
